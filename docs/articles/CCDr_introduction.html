<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to CCDr: <br> a simple framework to update the Complex Crises Database • CCDr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to CCDr: &lt;br&gt; a simple framework to update the Complex Crises Database">
<meta property="og:description" content="CCDr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CCDr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CCDr_Descriptives.html">The CCDr package and the Covid19</a>
    </li>
    <li>
      <a href="../articles/CCDr_introduction.html">Introduction to CCDr: &lt;br&gt; a simple framework to update the Complex Crises Database</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="CCDr_introduction_files/header-attrs-2.5.3/header-attrs.js"></script><link href="CCDr_introduction_files/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet">
<script src="CCDr_introduction_files/anchor-sections-1.0.1/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to CCDr: <br> a simple framework to update the Complex Crises Database</h1>
                        <h4 class="author">Manuel Betin, Umberto Collodel</h4>
            
            <h4 class="date">3/20/2020</h4>
      
      
      <div class="hidden name"><code>CCDr_introduction.Rmd</code></div>

    </div>

    
    
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The current version of the package is available on github and can be installed using the devtools package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#library(devtools)</span>
<span class="co">#devtools::install_github("manuelbetin/CCDr")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">CCDr</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The package provides several functions to compute term frequencies on the corpus of reports. Due to the different potential usages and for the necessity to handle large amounts of data several wrap up functions are provided to be able to perform the different steps one by one or sequentially. The packages is constructed in three different blocs:</p>
<ul>
<li>Lexicon: define and prepare categories and keywords</li>
<li>Corpus: download, explore and aggregate</li>
<li>Term Frequencies: compute the indexes</li>
</ul>
<p>The main functions are:</p>
<ul>
<li>
<strong>ccdr.lexicon()</strong>: provide the list of categories and keywords</li>
<li>
<strong>scrap.ccdr.files()</strong>: download reports in pdf formats</li>
<li>
<strong>ccdr.corpus()</strong>: transform pdf into a dataframe of text</li>
<li>
<strong>ccdr.tfs()</strong>: run the term frequency on the corpus for several categories</li>
<li>
<strong>run.ccdr.tf()</strong>; run the term frequency on locally stored corpus</li>
<li>
<strong>scrap.ccdr.tfs()</strong> run the term frequency directly downloading the files</li>
<li>
<strong>update.ccdr.tfs()</strong> update the term frequency matrix with new categories</li>
</ul>
<div id="lexicon-browse-lexicon-of-economic-crisis" class="section level3">
<h3 class="hasAnchor">
<a href="#lexicon-browse-lexicon-of-economic-crisis" class="anchor"></a>LEXICON: Browse lexicon of economic crisis</h3>
<p>Access the names of the existing categories in the lexicon using the function lexicon()</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ccdr.lexicon.html">ccdr.lexicon</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Wars"                       "Wars_confusing"            </span>
<span class="co">#&gt;  [3] "Migration"                  "Natural_disaster"          </span>
<span class="co">#&gt;  [5] "Natural_disaster_confusing" "Epidemics"                 </span>
<span class="co">#&gt;  [7] "Commodity_crisis"           "Political_crisis"          </span>
<span class="co">#&gt;  [9] "Social_crisis"              "Labormarket_boom"          </span>
<span class="co">#&gt; [11] "Labormarket_crisis"         "Nuclear_accident"          </span>
<span class="co">#&gt; [13] "Cyber_attack"               "Credit_boom"               </span>
<span class="co">#&gt; [15] "Housing_boom"               "Housing_crisis"            </span>
<span class="co">#&gt; [17] "Banking_crisis"             "Banking_crisis_severe"     </span>
<span class="co">#&gt; [19] "Financial_crisis"           "Inflation_crisis"          </span>
<span class="co">#&gt; [21] "Trade_crisis"               "World_outcomes"            </span>
<span class="co">#&gt; [23] "Contagion"                  "Positive_expectations"     </span>
<span class="co">#&gt; [25] "Expectations"               "Balance_payment_crisis"    </span>
<span class="co">#&gt; [27] "Reduction_reserves"         "Currency_crisis"           </span>
<span class="co">#&gt; [29] "Currency_crisis_severe"     "Currency_crisis_confusing" </span>
<span class="co">#&gt; [31] "Floating_exchange_rate"     "Fixed_exchange_rate"       </span>
<span class="co">#&gt; [33] "Losening_monetary_policy"   "Tightening_monetary_policy"</span>
<span class="co">#&gt; [35] "Severe_recession"           "Soft_recession"            </span>
<span class="co">#&gt; [37] "Expansion"                  "Poverty_crisis"            </span>
<span class="co">#&gt; [39] "Fiscal_outcomes"            "Low_public_debt"           </span>
<span class="co">#&gt; [41] "Fiscal_stimulus"            "Fiscal_consolidation"      </span>
<span class="co">#&gt; [43] "Concessional_lending"       "Short_term_debt"           </span>
<span class="co">#&gt; [45] "floating_rate_debt"         "foreign_debt"              </span>
<span class="co">#&gt; [47] "Sovereign_default"          "Problematic_documents"</span></code></pre></div>
<p>Browse the keywords associated to each category using lexicon_details(“nameofmycategory”)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ccdr.lexicon_details.html">ccdr.lexicon_details</a></span><span class="op">(</span><span class="st">"Severe_recession"</span><span class="op">)</span>
<span class="co">#&gt; $Severe_recession</span>
<span class="co">#&gt;  [1] "severe economic crisis"                 </span>
<span class="co">#&gt;  [2] "very difficult economic circumstances"  </span>
<span class="co">#&gt;  [3] "Severe recession"                       </span>
<span class="co">#&gt;  [4] "severe crisis"                          </span>
<span class="co">#&gt;  [5] "economic crisis"                        </span>
<span class="co">#&gt;  [6] "steep recession"                        </span>
<span class="co">#&gt;  [7] "strong recessionary headwinds"          </span>
<span class="co">#&gt;  [8] "sharp slowdown"                         </span>
<span class="co">#&gt;  [9] "sharp declines in output"               </span>
<span class="co">#&gt; [10] "significant loss of output"             </span>
<span class="co">#&gt; [11] "economic collapse"                      </span>
<span class="co">#&gt; [12] "deeper recession"                       </span>
<span class="co">#&gt; [13] "deepening recession"                    </span>
<span class="co">#&gt; [14] "painful recession"                      </span>
<span class="co">#&gt; [15] "prolonged recession"                    </span>
<span class="co">#&gt; [16] "lengthening recession"                  </span>
<span class="co">#&gt; [17] "severity of the recession"              </span>
<span class="co">#&gt; [18] "economic recession"                     </span>
<span class="co">#&gt; [19] "sharp contraction of economic activity" </span>
<span class="co">#&gt; [20] "strong contraction of economic activity"</span>
<span class="co">#&gt; [21] "large contraction of economic activity" </span>
<span class="co">#&gt; [22] "deep recession"                         </span>
<span class="co">#&gt; [23] "large economic slowdown"                </span>
<span class="co">#&gt; [24] "severe recession"                       </span>
<span class="co">#&gt; [25] "profond recession"                      </span>
<span class="co">#&gt; [26] "contraction in output"                  </span>
<span class="co">#&gt; [27] "deep recession"                         </span>
<span class="co">#&gt; [28] "severe contraction"                     </span>
<span class="co">#&gt; [29] "deep contraction"                       </span>
<span class="co">#&gt; [30] "profond contraction"                    </span>
<span class="co">#&gt; [31] "large decline in income per capita"     </span>
<span class="co">#&gt; [32] "deep economic downturn"                 </span>
<span class="co">#&gt; [33] "severe economic downturn"               </span>
<span class="co">#&gt; [34] "deep economic downturn"</span></code></pre></div>
<p>Create your own lexicon by creating a named list with the set of keywords associated</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_new_lexicon</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Recession<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"severe economic crisis"</span>,
                                <span class="st">"Severe recession"</span>,
                                <span class="st">"severe crisis"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="corpus-download-imf-reports" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-download-imf-reports" class="anchor"></a>CORPUS: Download IMF reports</h3>
<p>Access urls of the IMF reports in the archives. The dataset “ComplexCrisesDatabase_urls” contains for document the relevant metadata including the name of the country, the date of publication, the url of the IMF archives where the documents can be downloaded and several other information extracted from the metadata of the documents. For instance the document corresponding to the request for Standby Arrangement of Argentina on the 25 of january of 1983 is accessible on the following link <a href="https://imfbox.box.com/shared/static/fx9w2df3n8u4ya2ni4ulnbrgp42c3ait.pdf" class="uri">https://imfbox.box.com/shared/static/fx9w2df3n8u4ya2ni4ulnbrgp42c3ait.pdf</a> .</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#load dataset containing urls of documents </span>
<span class="co">#data("ComplexCrisesDatabase_urls")</span>
<span class="va">ComplexCrisesDatabase_urls</span><span class="op">=</span><span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"../data/ComplexCrisesDatabase_urls.rda"</span><span class="op">)</span>
<span class="va">url_links</span><span class="op">=</span> <span class="va">ComplexCrisesDatabase_urls</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">ID</span><span class="op">==</span><span class="st">"ARG"</span><span class="op">)</span>
<span class="va">url_links</span><span class="op">=</span><span class="va">url_links</span><span class="op">[</span><span class="fl">150</span><span class="op">:</span><span class="fl">155</span>,<span class="op">]</span>

<span class="va">url_links</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">.</span>,<span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 21</span>
<span class="co">#&gt;   ID    period     title hierarchy pdf   type_doc_progra… type_program</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;       </span>
<span class="co">#&gt; 1 ARG   1983-01-25 arge… EBS/83/8… http… request          SBA         </span>
<span class="co">#&gt; 2 ARG   1983-05-18 arge… EBS/83/97 http… modification     SBA         </span>
<span class="co">#&gt; 3 ARG   1983-05-27 arge… &lt;NA&gt;      http… modification     &lt;NA&gt;        </span>
<span class="co">#&gt; # … with 14 more variables: type_doc_consultations &lt;chr&gt;, Review_number &lt;chr&gt;,</span>
<span class="co">#&gt; #   perf_criteria &lt;chr&gt;, waiver &lt;chr&gt;, modification &lt;chr&gt;, membership &lt;dbl&gt;,</span>
<span class="co">#&gt; #   statements &lt;dbl&gt;, repurchase_transaction &lt;dbl&gt;, technical_assistance &lt;dbl&gt;,</span>
<span class="co">#&gt; #   expost_assessment &lt;dbl&gt;, exchange_system &lt;dbl&gt;, overdue_obligations &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_hierarchy &lt;chr&gt;, name_file &lt;chr&gt;</span></code></pre></div>
<p>Download several reports in pdf format and store them locally in folter of your choice using the pdf_from_url() function. The following example downloads 5 reports corresponding to the 5 urls provided in the dataset url_links. Note that to properly download the file, the argument urls must be a table containing at least two columns: name_file (the name of the files downloaded) and pdf (the url need to access the files in the archives). The second argument <em>export_path</em> corresponds to name of a folder where the downloaded files will be saved.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/scrap.ccdr.files.html">scrap.ccdr.files</a></span><span class="op">(</span><span class="va">url_links</span>,<span class="st">"mydocs_for_textmining"</span><span class="op">)</span></code></pre></div>
<p>To access more recent reports from the current publications of the IMF website</p>
</div>
<div id="corpus-aggregate-the-pdf-files-into-a-dataset-in-text-format" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-aggregate-the-pdf-files-into-a-dataset-in-text-format" class="anchor"></a>CORPUS: Aggregate the pdf files into a dataset in text format</h3>
<p>Documents in pdf format need to be properly transformed into text format to be able to perform the text analysis. The function aggregate_corpus() aggregates all the files into a single list. In the following example the documents contained in the folder “mydocs_to_textmining” are aggregated. The argument only_files=T ensure that only the text in the document are stored and not the information in the metadata.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">corpus</span><span class="op">=</span><span class="fu"><a href="../reference/ccdr.corpus.html">ccdr.corpus</a></span><span class="op">(</span><span class="st">"mydocs_for_textmining"</span>,only_files <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] "mydocs_for_textmining/ARG_1983-01-25_request.pdf"</span>
<span class="co">#&gt; 1/5 ARG_1983-01-25_request: 0.146 sec elapsed</span>
<span class="co">#&gt; [1] "mydocs_for_textmining/ARG_1983-05-18_modification.pdf"</span>
<span class="co">#&gt; 2/5 ARG_1983-05-18_modification: 0.047 sec elapsed</span>
<span class="co">#&gt; [1] "mydocs_for_textmining/ARG_1983-05-27_modification.pdf"</span>
<span class="co">#&gt; 3/5 ARG_1983-05-27_modification: 0.19 sec elapsed</span>
<span class="co">#&gt; [1] "mydocs_for_textmining/ARG_1983-06-08_exchange system.pdf"</span>
<span class="co">#&gt; 4/5 ARG_1983-06-08_exchange system: 0.021 sec elapsed</span>
<span class="co">#&gt; [1] "mydocs_for_textmining/ARG_1983-07-28_exchange system.pdf"</span>
<span class="co">#&gt; 5/5 ARG_1983-07-28_exchange system: 0.021 sec elapsed</span>

<span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">corpus</span>,file<span class="op">=</span><span class="st">"mycorpus.RData"</span><span class="op">)</span></code></pre></div>
</div>
<div id="corpus-explore-the-reports" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-explore-the-reports" class="anchor"></a>CORPUS: Explore the reports</h3>
<p>To perform exploratory analysis on the reports, to extract specific paragraphs or to enrich your lexicon you can perform a keyword search in a specific document. In the following example the function locate all the occurrences of “debt” in the request for Standby Arrangement of Argentina in 1983.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co">#pages_containing_word=ccdr.(corpus$`ARG_1983-01-25_request`,"debt")</span>
<span class="co">#pages_containing_word</span></code></pre></div>
<p>Compute the document term frequency for all the files in the corpus for the category “Severe_recession”</p>
</div>
<div id="term-frequencies-compute-the-indexes" class="section level3">
<h3 class="hasAnchor">
<a href="#term-frequencies-compute-the-indexes" class="anchor"></a>TERM FREQUENCIES: compute the indexes</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tf_matrix</span><span class="op">=</span><span class="fu"><a href="../reference/ccdr.tf.html">ccdr.tf</a></span><span class="op">(</span><span class="va">corpus</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Severe recession"</span>,<span class="st">"crisis"</span>,<span class="st">"crises"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tf_matrix</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   var[,1] file                          </span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;                         </span>
<span class="co">#&gt; 1       0 ARG_1983-01-25_request        </span>
<span class="co">#&gt; 2       0 ARG_1983-05-18_modification   </span>
<span class="co">#&gt; 3      NA ARG_1983-05-27_modification   </span>
<span class="co">#&gt; 4       0 ARG_1983-06-08_exchange system</span>
<span class="co">#&gt; 5       0 ARG_1983-07-28_exchange system</span></code></pre></div>
<p>Compute the document term frequency for several categories “Currency_crisis” and “Balance_payment_crisis”. Each documents correspond to a row of the table and the different indexes in columns.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">mycategories</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Expansion'</span>,<span class="st">"Balance_payment_crisis"</span>,<span class="st">"Sovereign_default"</span><span class="op">)</span>

<span class="fu"><a href="../reference/ccdr.tfs.html">ccdr.tfs</a></span><span class="op">(</span>corpus<span class="op">=</span><span class="va">corpus</span>,lexicon<span class="op">=</span><span class="fu"><a href="../reference/ccdr.lexicon.html">ccdr.lexicon</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="va">mycategories</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (1/3) running: Expansion</span>
<span class="co">#&gt; Expansion: 1.652 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: Expansion</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (2/3) running: Balance_payment_crisis</span>
<span class="co">#&gt; Balance_payment_crisis: 2.739 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: Balance_payment_crisis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (3/3) running: Sovereign_default</span>
<span class="co">#&gt; Sovereign_default: 0.906 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: Sovereign_default</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   file                  Expansion[,1] Balance_payment_crisi… Sovereign_default[…</span>
<span class="co">#&gt;   &lt;chr&gt;                         &lt;dbl&gt;                  &lt;dbl&gt;               &lt;dbl&gt;</span>
<span class="co">#&gt; 1 ARG_1983-01-25_reque…       0.00132                      0            0.00470 </span>
<span class="co">#&gt; 2 ARG_1983-05-18_modif…       0                            0            0.000642</span>
<span class="co">#&gt; 3 ARG_1983-05-27_modif…      NA                           NA           NA       </span>
<span class="co">#&gt; 4 ARG_1983-06-08_excha…       0                            0            0       </span>
<span class="co">#&gt; 5 ARG_1983-07-28_excha…       0                            0            0</span></code></pre></div>
<p>Create you own lexicon</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lexicon</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>newcategory<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'recession'</span>,<span class="st">"crises"</span>,<span class="st">"lending arrangement"</span><span class="op">)</span>,
             newcategory2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"currency crises"</span>,<span class="st">"devaluation"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/ccdr.tfs.html">ccdr.tfs</a></span><span class="op">(</span>corpus<span class="op">=</span><span class="va">corpus</span>,lexicon<span class="op">=</span><span class="va">lexicon</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (1/2) running: newcategory</span>
<span class="co">#&gt; newcategory: 0.654 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: newcategory</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (2/2) running: newcategory2</span>
<span class="co">#&gt; newcategory2: 0.585 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: newcategory2</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;   file                           newcategory[,1] newcategory2[,1]</span>
<span class="co">#&gt;   &lt;chr&gt;                                    &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt; 1 ARG_1983-01-25_request                0.000648                0</span>
<span class="co">#&gt; 2 ARG_1983-05-18_modification           0                       0</span>
<span class="co">#&gt; 3 ARG_1983-05-27_modification          NA                      NA</span>
<span class="co">#&gt; 4 ARG_1983-06-08_exchange system        0                       0</span>
<span class="co">#&gt; 5 ARG_1983-07-28_exchange system        0                       0</span></code></pre></div>
<p>Wrapup function for tf() . Given a corpus saved locally compute the term frequencies for different categories. In the following example we used mycorpus.RData and the categories Currency_crisis and Balance_payment_crisis.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#Run term frequency matrix</span>

<span class="va">wrapup_for_tf</span><span class="op">=</span><span class="fu"><a href="../reference/run.ccdr.tfs.html">run.ccdr.tfs</a></span><span class="op">(</span>corpus_file <span class="op">=</span> <span class="st">"mycorpus.RData"</span>,
                     lexicon <span class="op">=</span> <span class="fu"><a href="../reference/ccdr.lexicon.html">ccdr.lexicon</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Currency_crisis"</span>,<span class="st">"Balance_payment_crisis"</span><span class="op">)</span><span class="op">]</span>,
                     parrallel <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; Loading corpus from mycorpus.RData</span>
<span class="co">#&gt; (1/2) running: Currency_crisis</span>
<span class="co">#&gt; Currency_crisis: 0.614 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: Currency_crisis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (2/2) running: Balance_payment_crisis</span>
<span class="co">#&gt; Balance_payment_crisis: 0.596 sec elapsed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Finished running: Balance_payment_crisis</span>
<span class="co">#&gt; 1.253 sec elapsed</span>
<span class="co">#&gt; [1] "export table in mycorpus.RData"</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wrapup_for_tf</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;   file                           Currency_crisis[,1] Balance_payment_crisis[,1]</span>
<span class="co">#&gt;   &lt;chr&gt;                                        &lt;dbl&gt;                      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 ARG_1983-01-25_request                           0                          0</span>
<span class="co">#&gt; 2 ARG_1983-05-18_modification                      0                          0</span>
<span class="co">#&gt; 3 ARG_1983-05-27_modification                     NA                         NA</span>
<span class="co">#&gt; 4 ARG_1983-06-08_exchange system                   0                          0</span>
<span class="co">#&gt; 5 ARG_1983-07-28_exchange system                   0                          0</span></code></pre></div>
<p>Wrapup function for run_tf that allows directly download the files and run the text mining with a single function.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scrap.ccdr.tfs</span>(<span class="at">urls =</span>url_links,<span class="at">lexicon =</span><span class="fu">ccdr.lexicon</span>()[<span class="fu">c</span>(<span class="st">"Currency_crisis"</span>,<span class="st">"Balance_payment_crisis"</span>]))</span></code></pre></div>
<p>Update the tf dataframe with additional columns with the new categories to compute</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">updated_tf</span><span class="op">=</span><span class="fu"><a href="../reference/ccdr.tfs.update.html">ccdr.tfs.update</a></span><span class="op">(</span>file_tf_to_update <span class="op">=</span> <span class="st">"temp/tf/ccd_tf.RData"</span>,
                corpus_file <span class="op">=</span> <span class="st">"temp/corpus/corpus.RData"</span>,
                lexicon <span class="op">=</span> <span class="fu"><a href="../reference/ccdr.lexicon.html">ccdr.lexicon</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Fiscal_outcomes"</span>,<span class="st">"Fiscal_consolidation"</span><span class="op">)</span><span class="op">]</span>,
                export_file <span class="op">=</span> <span class="st">"temp/tf/ccd_tf_new.RData"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">updated_tf</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Manuel Betin, Umberto Collodel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
